#!/bin/sh
dim=$(xdpyinfo | grep dimensions | awk '{print $2}')
bg="$(xrdb -query | grep color0 | awk '{print $2}')"

[ -z "$1" ] &&
    bgcolor="$(xrdb -query | grep color0 | awk '{print $2}')" &&
    convert -size $dim xc:"$bgcolor" /tmp/colorbg.png &&
    bg="/tmp/colorbg.png" ||
    bg="$1"

xwallpaper --zoom "$bg" &&
    rm /tmp/colorbg.png 2>/dev/null &&
    exit 0 || exit 1
